name: Publish Docker image
on:
  release:
    types: [created]
jobs:
  publish image:
    name: Push Docker image to Docker Hub
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v2

      - name: Prepare go environment
        uses: actions/setup-go@v2
        with:
          go-version: '^1.14.7' # The Go version to download (if necessary) and use.

      - name: Jenkins Operator - unit tests
        run: make verify
#
#      - name: Backup PVC - e2e
#        run: make -C backup/pvc/ docker-e2e UID=$(id -u) GID=$(id -g)

#      - name: Jenkins Operator - e2e
#        uses: sth

#      - name: Jenkins Operator Helm Chart - e2e
#        uses: sth

#      - name: Push to Docker Hub
#        uses: docker/build-push-action@v1
#        with:
#          username: ${{ secrets.DOCKER_USERNAME }}
#          password: ${{ secrets.DOCKER_PASSWORD }}
#          repository: my-docker-hub-namespace/my-docker-hub-repository
#          tag_with_ref: true